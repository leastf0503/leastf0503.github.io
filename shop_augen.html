<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TechMarket - Online Shop</title>
<style>
  :root {
    --primary-color: #2e76cc;
    --primary-hover: #1b4f99;
    --success-color: #28a745;
    --danger-color: #dc3545;
    --text-dark: #333;
    --text-light: #666;
    --border-color: #ddd;
    --bg-light: #f8f9fa;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
    background: #f0f4f8;
    color: var(--text-dark);
  }

  /* START SCREEN */
  #start-screen {
    display: flex;
    flex-direction: column;
    height: 100vh;
    justify-content: center;
    align-items: center;
    padding: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    text-align: center;
  }
  #start-screen .card {
    background: white;
    padding: 40px;
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    max-width: 450px;
    width: 100%;
  }
  #start-screen h1 {
    font-size: 2.2em;
    margin-bottom: 0.5em;
    color: var(--primary-color);
  }
  #start-screen p {
    margin-bottom: 1.5em;
    color: var(--text-light);
    line-height: 1.6;
  }
  #start-screen input {
    padding: 12px 16px;
    font-size: 1em;
    width: 100%;
    margin-bottom: 1.5em;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    transition: border-color 0.3s;
  }
  #start-screen input:focus {
    outline: none;
    border-color: var(--primary-color);
  }
  #start-screen button {
    padding: 14px 32px;
    font-size: 1.1em;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    font-weight: 600;
    transition: background-color 0.3s;
  }
  #start-screen button:hover {
    background-color: var(--primary-hover);
  }

  /* HEADER */
  header {
    background: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  .header-content {
    max-width: 1400px;
    margin: 0 auto;
    padding: 16px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 24px;
  }
  .logo {
    font-size: 1.8em;
    font-weight: bold;
    color: var(--primary-color);
    text-decoration: none;
  }
  .search-bar {
    flex: 1;
    max-width: 600px;
    position: relative;
  }
  .search-bar input {
    width: 100%;
    padding: 12px 48px 12px 16px;
    border: 2px solid var(--border-color);
    border-radius: 24px;
    font-size: 0.95em;
    transition: border-color 0.3s;
  }
  .search-bar input:focus {
    outline: none;
    border-color: var(--primary-color);
  }
  .search-bar button {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 16px;
    cursor: pointer;
    font-size: 0.9em;
  }
  .header-icons {
    display: flex;
    gap: 20px;
    align-items: center;
  }
  .icon-btn {
    background: none;
    border: none;
    font-size: 1.4em;
    cursor: pointer;
    position: relative;
    padding: 8px;
    color: var(--text-dark);
    transition: color 0.3s;
  }
  .icon-btn:hover {
    color: var(--primary-color);
  }
  .badge {
    position: absolute;
    top: 2px;
    right: 2px;
    background: var(--danger-color);
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.65em;
    font-weight: bold;
  }

  /* NAVIGATION */
  nav {
    background: var(--bg-light);
    border-bottom: 1px solid var(--border-color);
  }
  .nav-content {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 24px;
    display: flex;
    gap: 32px;
    overflow-x: auto;
  }
  .nav-content button {
    background: none;
    border: none;
    padding: 16px 8px;
    cursor: pointer;
    font-size: 0.95em;
    color: var(--text-dark);
    font-weight: 500;
    white-space: nowrap;
    border-bottom: 3px solid transparent;
    transition: all 0.3s;
  }
  .nav-content button:hover,
  .nav-content button.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
  }

  /* MAIN CONTENT */
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px;
    display: none;
  }
  .container.active {
    display: block;
  }

  /* PRODUCTS GRID */
  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 24px;
    margin-top: 24px;
  }
  .product-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: pointer;
    display: flex;
    flex-direction: column;
  }
  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  }
  .product-image {
    width: 100%;
    height: 200px;
    background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4em;
    position: relative;
  }
  .product-badge {
    position: absolute;
    top: 12px;
    right: 12px;
    background: var(--danger-color);
    color: white;
    padding: 4px 10px;
    border-radius: 16px;
    font-size: 0.75em;
    font-weight: bold;
  }
  .product-info {
    padding: 16px;
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  .product-name {
    font-size: 1.1em;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--text-dark);
  }
  .product-desc {
    font-size: 0.85em;
    color: var(--text-light);
    margin-bottom: 12px;
    line-height: 1.4;
    flex: 1;
  }
  .product-rating {
    display: flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 12px;
    font-size: 0.9em;
  }
  .stars {
    color: #ffa500;
  }
  .review-count {
    color: var(--text-light);
    font-size: 0.85em;
  }
  .product-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: auto;
  }
  .product-price {
    font-size: 1.4em;
    font-weight: bold;
    color: var(--primary-color);
  }
  .old-price {
    font-size: 0.75em;
    color: var(--text-light);
    text-decoration: line-through;
    display: block;
    margin-bottom: 4px;
  }
  .add-to-cart-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.9em;
    transition: background-color 0.3s;
  }
  .add-to-cart-btn:hover {
    background: var(--primary-hover);
  }

  /* CART SIDEBAR */
  .cart-sidebar {
    position: fixed;
    right: -400px;
    top: 0;
    width: 400px;
    height: 100vh;
    background: white;
    box-shadow: -4px 0 20px rgba(0,0,0,0.15);
    transition: right 0.3s ease;
    z-index: 2000;
    display: flex;
    flex-direction: column;
  }
  .cart-sidebar.open {
    right: 0;
  }
  .cart-header {
    padding: 24px;
    border-bottom: 2px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .cart-header h2 {
    font-size: 1.5em;
  }
  .close-cart {
    background: none;
    border: none;
    font-size: 1.8em;
    cursor: pointer;
    color: var(--text-light);
    line-height: 1;
    padding: 4px;
  }
  .cart-items {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
  }
  .cart-item {
    display: flex;
    gap: 16px;
    padding: 16px;
    border-bottom: 1px solid var(--border-color);
    align-items: center;
  }
  .cart-item-image {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    flex-shrink: 0;
  }
  .cart-item-info {
    flex: 1;
  }
  .cart-item-name {
    font-weight: 600;
    margin-bottom: 8px;
  }
  .cart-item-price {
    color: var(--primary-color);
    font-weight: bold;
    font-size: 1.1em;
  }
  .cart-item-controls {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
  }
  .qty-btn {
    background: var(--bg-light);
    border: 1px solid var(--border-color);
    width: 28px;
    height: 28px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .qty-btn:hover {
    background: var(--border-color);
  }
  .qty-display {
    min-width: 32px;
    text-align: center;
    font-weight: 600;
  }
  .remove-item {
    background: none;
    border: none;
    color: var(--danger-color);
    cursor: pointer;
    font-size: 1.2em;
    padding: 4px;
    margin-left: auto;
  }
  .cart-footer {
    padding: 24px;
    border-top: 2px solid var(--border-color);
  }
  .cart-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    font-size: 1.3em;
    font-weight: bold;
  }
  .checkout-btn {
    width: 100%;
    padding: 16px;
    background: var(--success-color);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .checkout-btn:hover {
    background: #218838;
  }
  .empty-cart {
    text-align: center;
    padding: 48px 24px;
    color: var(--text-light);
  }
  .empty-cart-icon {
    font-size: 4em;
    margin-bottom: 16px;
  }

  /* PROFILE SECTION */
  .profile-container {
    display: grid;
    grid-template-columns: 250px 1fr;
    gap: 24px;
    margin-top: 24px;
  }
  .profile-sidebar {
    background: white;
    border-radius: 12px;
    padding: 24px;
    height: fit-content;
  }
  .profile-avatar {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3em;
    color: white;
    margin: 0 auto 16px;
  }
  .profile-name {
    text-align: center;
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 8px;
  }
  .profile-email {
    text-align: center;
    color: var(--text-light);
    font-size: 0.9em;
    margin-bottom: 24px;
  }
  .profile-menu button {
    width: 100%;
    padding: 12px 16px;
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    border-radius: 8px;
    margin-bottom: 4px;
    transition: background-color 0.3s;
    font-size: 0.95em;
  }
  .profile-menu button:hover,
  .profile-menu button.active {
    background: var(--bg-light);
    color: var(--primary-color);
  }
  .profile-content {
    background: white;
    border-radius: 12px;
    padding: 32px;
  }
  .profile-section {
    display: none;
  }
  .profile-section.active {
    display: block;
  }
  .profile-section h3 {
    font-size: 1.5em;
    margin-bottom: 24px;
  }
  .form-group {
    margin-bottom: 20px;
  }
  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--text-dark);
  }
  .form-group input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    font-size: 0.95em;
    transition: border-color 0.3s;
  }
  .form-group input:focus {
    outline: none;
    border-color: var(--primary-color);
  }
  .save-btn {
    padding: 12px 32px;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .save-btn:hover {
    background: var(--primary-hover);
  }
  .order-card {
    border: 2px solid var(--border-color);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
  }
  .order-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-color);
  }
  .order-number {
    font-weight: 600;
  }
  .order-status {
    background: var(--success-color);
    color: white;
    padding: 4px 12px;
    border-radius: 16px;
    font-size: 0.85em;
  }
  .order-items {
    margin-bottom: 16px;
  }
  .order-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    color: var(--text-light);
  }
  .order-total {
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    font-size: 1.2em;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
  }

  /* COOKIE BANNER */
  #cookie-banner {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 420px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.15);
    padding: 32px;
    display: none;
    z-index: 3000;
    border: 2px solid var(--border-color);
  }
  .cookie-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 20px;
  }
  .cookie-icon {
    font-size: 2.5em;
  }
  .cookie-title {
    font-size: 1.3em;
    font-weight: bold;
    color: var(--text-dark);
  }
  .eyes-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 24px;
  }
  .eye {
    width: 50px;
    height: 50px;
    background: white;
    border: 3px solid var(--text-dark);
    border-radius: 50%;
    position: relative;
    overflow: hidden;
  }
  .pupil {
    width: 22px;
    height: 22px;
    background: var(--text-dark);
    border-radius: 50%;
    position: absolute;
    top: 14px;
    left: 14px;
    transition: all 0.1s linear;
  }
  .cookie-text {
    font-size: 0.95em;
    line-height: 1.6;
    color: var(--text-light);
    margin-bottom: 20px;
  }
  .cookie-details {
    font-size: 0.85em;
    color: var(--text-light);
    margin-bottom: 20px;
    padding: 16px;
    background: var(--bg-light);
    border-radius: 8px;
  }
  .cookie-category {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
  }
  .cookie-category label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
  }
  .cookie-category input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
  }
  .cookie-actions {
    display: flex;
    gap: 12px;
  }
  .cookie-btn {
    flex: 1;
    padding: 14px;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 0.95em;
  }
  .cookie-btn-primary {
    background: var(--success-color);
    color: white;
  }
  .cookie-btn-primary:hover {
    background: #218838;
  }
  .cookie-btn-secondary {
    background: var(--bg-light);
    color: var(--text-dark);
    border: 2px solid var(--border-color);
  }
  .cookie-btn-secondary:hover {
    background: var(--border-color);
  }
  .settings-link {
    text-align: center;
    margin-top: 12px;
  }
  .settings-link button {
    background: none;
    border: none;
    color: var(--primary-color);
    text-decoration: underline;
    cursor: pointer;
    font-size: 0.9em;
  }

  /* FINISH BUTTON */
  #finish-button {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    padding: 16px 48px;
    background: var(--danger-color);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 16px rgba(220, 53, 69, 0.3);
    display: none;
    z-index: 1500;
    transition: all 0.3s;
  }
  #finish-button:hover {
    background: #c82333;
    transform: translateX(-50%) translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
  }

  /* SUMMARY */
  #summary {
    max-width: 800px;
    margin: 48px auto;
    background: white;
    padding: 40px;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    display: none;
  }
  #summary h2 {
    margin-bottom: 24px;
    color: var(--primary-color);
  }
  #summary pre {
    background: var(--bg-light);
    padding: 24px;
    border-radius: 8px;
    overflow-x: auto;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
    line-height: 1.6;
  }

  /* OVERLAY */
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    z-index: 1500;
  }
  .overlay.active {
    display: block;
  }

  /* RESPONSIVE */
  @media (max-width: 768px) {
    .header-content {
      flex-wrap: wrap;
    }
    .search-bar {
      order: 3;
      flex-basis: 100%;
      max-width: 100%;
    }
    .products-grid {
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 16px;
    }
    .profile-container {
      grid-template-columns: 1fr;
    }
    .cart-sidebar {
      width: 100%;
      right: -100%;
    }
    #cookie-banner {
      width: calc(100% - 32px);
      left: 16px;
      right: 16px;
      bottom: 16px;
    }
  }
</style>
</head>
<body>

<!-- START SCREEN -->
<div id="start-screen">
  <div class="card">
    <h1>üõçÔ∏è Willkommen</h1>
    <p>Vielen Dank f√ºr Ihre Teilnahme an unserer Studie!<br>Bitte geben Sie Ihre Teilnehmer-ID ein, um zu beginnen.</p>
    <input type="text" id="participant-id" placeholder="Teilnehmer-ID eingeben" />
    <button id="start-button">Studie starten</button>
  </div>
</div>

<!-- MAIN SHOP -->
<div id="shop" style="display: none;">
  <!-- HEADER -->
  <header>
    <div class="header-content">
      <a href="#" class="logo">üõí TechMarket</a>
      <div class="search-bar">
        <input type="text" placeholder="Produkte suchen..." id="search-input">
        <button>üîç</button>
      </div>
      <div class="header-icons">
        <button class="icon-btn" id="profile-btn">üë§</button>
        <button class="icon-btn" id="cart-btn">
          üõí
          <span class="badge" id="cart-badge">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- NAVIGATION -->
  <nav>
    <div class="nav-content">
      <button class="nav-btn active" data-category="alle">Alle Produkte</button>
      <button class="nav-btn" data-category="elektronik">üì± Elektronik</button>
      <button class="nav-btn" data-category="computer">üíª Computer</button>
      <button class="nav-btn" data-category="audio">üéß Audio</button>
      <button class="nav-btn" data-category="zubehoer">‚åö Zubeh√∂r</button>
      <button class="nav-btn" data-category="angebote">üî• Angebote</button>
    </div>
  </nav>

  <!-- PRODUCTS CONTAINER -->
  <div class="container active" id="products-container">
    <div class="products-grid" id="products-grid"></div>
  </div>

  <!-- PROFILE CONTAINER -->
  <div class="container" id="profile-container">
    <div class="profile-container">
      <div class="profile-sidebar">
        <div class="profile-avatar">üë§</div>
        <div class="profile-name">Max Mustermann</div>
        <div class="profile-email" id="user-email">max.mustermann@email.de</div>
        <div class="profile-menu">
          <button class="profile-menu-btn active" data-section="account">üìù Mein Konto</button>
          <button class="profile-menu-btn" data-section="orders">üì¶ Bestellungen</button>
          <button class="profile-menu-btn" data-section="settings">‚öôÔ∏è Einstellungen</button>
        </div>
      </div>
      <div class="profile-content">
        <!-- Account Section -->
        <div class="profile-section active" id="account-section">
          <h3>Mein Konto</h3>
          <div class="form-group">
            <label>Vorname</label>
            <input type="text" value="Max" id="first-name">
          </div>
          <div class="form-group">
            <label>Nachname</label>
            <input type="text" value="Mustermann" id="last-name">
          </div>
          <div class="form-group">
            <label>E-Mail</label>
            <input type="email" value="max.mustermann@email.de" id="email">
          </div>
          <div class="form-group">
            <label>Telefon</label>
            <input type="tel" value="+49 123 456789" id="phone">
          </div>
          <button class="save-btn">√Ñnderungen speichern</button>
        </div>

        <!-- Orders Section -->
        <div class="profile-section" id="orders-section">
          <h3>Meine Bestellungen</h3>
          <div class="order-card">
            <div class="order-header">
              <div>
                <div class="order-number">Bestellung #12345</div>
                <div style="color: var(--text-light); font-size: 0.9em; margin-top: 4px;">15. Oktober 2025</div>
              </div>
              <div class="order-status">Zugestellt</div>
            </div>
            <div class="order-items">
              <div class="order-item">
                <span>Laptop ProBook 15</span>
                <span>‚Ç¨899</span>
              </div>
              <div class="order-item">
                <span>Wireless Maus</span>
                <span>‚Ç¨29</span>
              </div>
            </div>
            <div class="order-total">
              <span>Gesamt</span>
              <span>‚Ç¨928</span>
            </div>
          </div>
          <div class="order-card">
            <div class="order-header">
              <div>
                <div class="order-number">Bestellung #12344</div>
                <div style="color: var(--text-light); font-size: 0.9em; margin-top: 4px;">2. Oktober 2025</div>
              </div>
              <div class="order-status" style="background: var(--primary-color);">In Bearbeitung</div>
            </div>
            <div class="order-items">
              <div class="order-item">
                <span>Bluetooth Kopfh√∂rer</span>
                <span>‚Ç¨149</span>
              </div>
            </div>
            <div class="order-total">
              <span>Gesamt</span>
              <span>‚Ç¨149</span>
            </div>
          </div>
        </div>

        <!-- Settings Section -->
        <div class="profile-section" id="settings-section">
          <h3>Einstellungen</h3>
          <div class="form-group">
            <label>Sprache</label>
            <input type="text" value="Deutsch" readonly>
          </div>
          <div class="form-group">
            <label>W√§hrung</label>
            <input type="text" value="EUR (‚Ç¨)" readonly>
          </div>
          <div class="form-group">
            <label>Newsletter abonnieren</label>
            <input type="checkbox" checked style="width: auto; margin-left: 8px;">
          </div>
          <button class="save-btn">Einstellungen speichern</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CART SIDEBAR -->
<div class="cart-sidebar" id="cart-sidebar">
  <div class="cart-header">
    <h2>Warenkorb</h2>
    <button class="close-cart" id="close-cart">√ó</button>
  </div>
  <div class="cart-items" id="cart-items">
    <div class="empty-cart">
      <div class="empty-cart-icon">üõí</div>
      <p>Ihr Warenkorb ist leer</p>
    </div>
  </div>
  <div class="cart-footer">
    <div class="cart-total">
      <span>Gesamt:</span>
      <span id="cart-total">‚Ç¨0</span>
    </div>
    <button class="checkout-btn">Zur Kasse</button>
  </div>
</div>

<!-- OVERLAY -->
<div class="overlay" id="overlay"></div>

<!-- COOKIE BANNER -->
<div id="cookie-banner">
  <div class="cookie-header">
    <div class="cookie-icon">üç™</div>
    <div class="cookie-title">Cookie-Einstellungen</div>
  </div>
  <div class="eyes-container">
    <div class="eye">
      <div class="pupil"></div>
    </div>
    <div class="eye">
      <div class="pupil"></div>
    </div>
  </div>
  <div class="cookie-text">
    Wir verwenden Cookies und √§hnliche Technologien, um Ihnen ein optimales Einkaufserlebnis zu bieten, unsere Website zu verbessern und Ihnen personalisierte Inhalte anzuzeigen.
  </div>
  <div class="cookie-details" id="cookie-details" style="display: none;">
    <div class="cookie-category">
      <label>
        <input type="checkbox" checked disabled>
        <span><strong>Notwendig</strong> - Erforderlich f√ºr die Funktion der Website</span>
      </label>
    </div>
    <div class="cookie-category">
      <label>
        <input type="checkbox" id="functional-cookies" checked>
        <span><strong>Funktional</strong> - Verbessern die Nutzererfahrung</span>
      </label>
    </div>
    <div class="cookie-category">
      <label>
        <input type="checkbox" id="analytics-cookies" checked>
        <span><strong>Analyse</strong> - Helfen uns die Website zu verbessern</span>
      </label>
    </div>
    <div class="cookie-category">
      <label>
        <input type="checkbox" id="marketing-cookies" checked>
        <span><strong>Marketing</strong> - F√ºr personalisierte Werbung</span>
      </label>
    </div>
  </div>
  <div class="cookie-actions">
    <button class="cookie-btn cookie-btn-secondary" id="reject-btn">Ablehnen</button>
    <button class="cookie-btn cookie-btn-primary" id="accept-btn">Alle akzeptieren</button>
  </div>
  <div class="settings-link">
    <button id="cookie-settings-btn">Einstellungen anpassen</button>
  </div>
</div>

<!-- FINISH BUTTON -->
<button id="finish-button">üìä Studie beenden</button>

<!-- SUMMARY -->
<div id="summary">
  <h2>Studiendaten - Zusammenfassung</h2>
  <pre id="summary-content"></pre>
</div>

<script>
  // PRODUCTS DATABASE
  const allProducts = [
    { id: 1, name: "Laptop ProBook 15", price: 899, oldPrice: 1099, emoji: "üíª", category: "computer", rating: 4.5, reviews: 234, desc: "15\" Display, 16GB RAM, 512GB SSD", badge: "-18%" },
    { id: 2, name: "Smartphone X12 Pro", price: 699, oldPrice: 899, emoji: "üì±", category: "elektronik", rating: 4.8, reviews: 567, desc: "6.5\" OLED, 5G, 128GB", badge: "-22%" },
    { id: 3, name: "Bluetooth Kopfh√∂rer", price: 149, oldPrice: null, emoji: "üéß", category: "audio", rating: 4.3, reviews: 189, desc: "Noise Cancelling, 30h Akku", badge: null },
    { id: 4, name: "Tablet Pro 11", price: 449, oldPrice: 599, emoji: "üì±", category: "elektronik", rating: 4.6, reviews: 312, desc: "11\" Display, WiFi + 5G", badge: "-25%" },
    { id: 5, name: "Smartwatch Elite", price: 299, oldPrice: 399, emoji: "‚åö", category: "zubehoer", rating: 4.4, reviews: 445, desc: "GPS, Herzfrequenz, wasserdicht", badge: "-25%" },
    { id: 6, name: "Digitalkamera 4K", price: 599, oldPrice: 799, emoji: "üì∑", category: "elektronik", rating: 4.7, reviews: 178, desc: "24MP, 4K Video, WiFi", badge: "-25%" },
    { id: 7, name: "Gaming-Tastatur RGB", price: 89, oldPrice: null, emoji: "‚å®Ô∏è", category: "zubehoer", rating: 4.5, reviews: 523, desc: "Mechanisch, RGB Beleuchtung", badge: null },
    { id: 8, name: "Wireless Maus", price: 29, oldPrice: null, emoji: "üñ±Ô∏è", category: "zubehoer", rating: 4.2, reviews: 892, desc: "Ergonomisch, 1600 DPI", badge: null },
    { id: 9, name: "USB-C Hub 7-in-1", price: 39, oldPrice: 59, emoji: "üîå", category: "zubehoer", rating: 4.3, reviews: 267, desc: "HDMI, USB 3.0, SD Kartenleser", badge: "-34%" },
    { id: 10, name: "Externe SSD 1TB", price: 129, oldPrice: null, emoji: "üíæ", category: "computer", rating: 4.6, reviews: 421, desc: "1TB Speicher, USB 3.2", badge: null },
    { id: 11, name: "Monitor 27\" 4K", price: 399, oldPrice: 549, emoji: "üñ•Ô∏è", category: "computer", rating: 4.7, reviews: 298, desc: "27\", 4K UHD, IPS Panel", badge: "-27%" },
    { id: 12, name: "Wireless Earbuds", price: 79, oldPrice: 119, emoji: "üéµ", category: "audio", rating: 4.4, reviews: 678, desc: "True Wireless, Noise Cancelling", badge: "-34%" },
    { id: 13, name: "Webcam HD Pro", price: 69, oldPrice: null, emoji: "üìπ", category: "computer", rating: 4.2, reviews: 345, desc: "1080p, Autofokus, Mikrofon", badge: null },
    { id: 14, name: "Powerbank 20000mAh", price: 35, oldPrice: null, emoji: "üîã", category: "zubehoer", rating: 4.5, reviews: 756, desc: "20000mAh, Fast Charge, 2x USB", badge: null },
    { id: 15, name: "Smart Speaker", price: 99, oldPrice: 129, emoji: "üîä", category: "audio", rating: 4.3, reviews: 534, desc: "360¬∞ Sound, Sprachsteuerung", badge: "-23%" },
    { id: 16, name: "E-Reader 7\"", price: 139, oldPrice: null, emoji: "üìñ", category: "elektronik", rating: 4.6, reviews: 412, desc: "7\" E-Ink Display, Wasserdicht", badge: null },
    { id: 17, name: "Drohne mit Kamera", price: 249, oldPrice: 349, emoji: "üöÅ", category: "elektronik", rating: 4.5, reviews: 189, desc: "4K Kamera, 30min Flugzeit", badge: "-29%" },
    { id: 18, name: "VR-Brille", price: 399, oldPrice: 499, emoji: "ü•Ω", category: "elektronik", rating: 4.4, reviews: 267, desc: "Virtual Reality Headset", badge: "-20%" }
  ];

  // STATE
  let participantId = "";
  let cart = [];
  let currentCategory = "alle";
  let bannerChoice = null;
  let startTime = null;
  let bannerShowTime = null;
  let interactions = [];

  // ELEMENTS
  const startScreen = document.getElementById('start-screen');
  const shopEl = document.getElementById('shop');
  const productsGrid = document.getElementById('products-grid');
  const productsContainer = document.getElementById('products-container');
  const profileContainer = document.getElementById('profile-container');
  const cartSidebar = document.getElementById('cart-sidebar');
  const cartItems = document.getElementById('cart-items');
  const cartBadge = document.getElementById('cart-badge');
  const cartTotal = document.getElementById('cart-total');
  const overlay = document.getElementById('overlay');
  const cookieBanner = document.getElementById('cookie-banner');
  const finishBtn = document.getElementById('finish-button');
  const summaryEl = document.getElementById('summary');
  const summaryContent = document.getElementById('summary-content');

  // EYE TRACKING
  const eyes = cookieBanner.querySelectorAll('.eye');
  const pupils = cookieBanner.querySelectorAll('.pupil');

  function moveEyes(event) {
    pupils.forEach((pupil, index) => {
      const eye = eyes[index];
      const rect = eye.getBoundingClientRect();
      const eyeCenterX = rect.left + rect.width / 2;
      const eyeCenterY = rect.top + rect.height / 2;
      const dx = event.clientX - eyeCenterX;
      const dy = event.clientY - eyeCenterY;
      const angle = Math.atan2(dy, dx);
      const maxOffset = 10;
      const offsetX = Math.cos(angle) * maxOffset;
      const offsetY = Math.sin(angle) * maxOffset;
      pupil.style.left = (14 + offsetX) + 'px';
      pupil.style.top = (14 + offsetY) + 'px';
    });
  }

  document.addEventListener('mousemove', (e) => {
    if (cookieBanner.style.display === 'block') {
      moveEyes(e);
    }
  });

  // RENDER PRODUCTS
  function renderProducts() {
    const filtered = currentCategory === 'alle' 
      ? allProducts 
      : currentCategory === 'angebote'
      ? allProducts.filter(p => p.badge)
      : allProducts.filter(p => p.category === currentCategory);

    productsGrid.innerHTML = filtered.map(product => `
      <div class="product-card" data-id="${product.id}">
        <div class="product-image">
          ${product.emoji}
          ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
        </div>
        <div class="product-info">
          <div class="product-name">${product.name}</div>
          <div class="product-desc">${product.desc}</div>
          <div class="product-rating">
            <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
            <span class="review-count">(${product.reviews})</span>
          </div>
          <div class="product-footer">
            <div>
              ${product.oldPrice ? `<span class="old-price">‚Ç¨${product.oldPrice}</span>` : ''}
              <div class="product-price">‚Ç¨${product.price}</div>
            </div>
            <button class="add-to-cart-btn" data-id="${product.id}">
              In den Warenkorb
            </button>
          </div>
        </div>
      </div>
    `).join('');
  }

  // UPDATE CART
  function updateCart() {
    cartBadge.textContent = cart.length;
    cartBadge.style.display = cart.length > 0 ? 'flex' : 'none';

    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    cartTotal.textContent = `‚Ç¨${total}`;

    if (cart.length === 0) {
      cartItems.innerHTML = `
        <div class="empty-cart">
          <div class="empty-cart-icon">üõí</div>
          <p>Ihr Warenkorb ist leer</p>
        </div>
      `;
    } else {
      cartItems.innerHTML = cart.map((item, index) => `
        <div class="cart-item">
          <div class="cart-item-image">${item.emoji}</div>
          <div class="cart-item-info">
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-price">‚Ç¨${item.price}</div>
            <div class="cart-item-controls">
              <button class="qty-btn" data-action="decrease" data-index="${index}">‚àí</button>
              <span class="qty-display">${item.quantity}</span>
              <button class="qty-btn" data-action="increase" data-index="${index}">+</button>
            </div>
          </div>
          <button class="remove-item" data-index="${index}">üóëÔ∏è</button>
        </div>
      `).join('');
    }
  }

  // ADD TO CART
  function addToCart(productId) {
    const product = allProducts.find(p => p.id === productId);
    if (!product) return;

    const existing = cart.find(item => item.id === productId);
    if (existing) {
      existing.quantity++;
    } else {
      cart.push({ ...product, quantity: 1 });
    }

    interactions.push({
      type: 'add_to_cart',
      product: product.name,
      time: Date.now() - startTime
    });

    updateCart();
  }

  // EVENT LISTENERS
  document.getElementById('start-button').addEventListener('click', () => {
    participantId = document.getElementById('participant-id').value.trim();
    if (!participantId) {
      alert('Bitte geben Sie eine Teilnehmer-ID ein');
      return;
    }

    startScreen.style.display = 'none';
    shopEl.style.display = 'block';
    startTime = Date.now();
    renderProducts();
    updateCart();

    // Show cookie banner after 8 seconds
    setTimeout(() => {
      cookieBanner.style.display = 'block';
      bannerShowTime = Date.now() - startTime;
      interactions.push({
        type: 'cookie_banner_shown',
        time: bannerShowTime
      });
    }, 8000);
  });

  // Navigation
  document.querySelectorAll('.nav-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentCategory = btn.dataset.category;
      renderProducts();
      interactions.push({
        type: 'category_change',
        category: currentCategory,
        time: Date.now() - startTime
      });
    });
  });

  // Add to cart
  productsGrid.addEventListener('click', (e) => {
    if (e.target.classList.contains('add-to-cart-btn')) {
      const id = parseInt(e.target.dataset.id);
      addToCart(id);
    }
  });

  // Cart sidebar
  document.getElementById('cart-btn').addEventListener('click', () => {
    cartSidebar.classList.add('open');
    overlay.classList.add('active');
  });

  document.getElementById('close-cart').addEventListener('click', () => {
    cartSidebar.classList.remove('open');
    overlay.classList.remove('active');
  });

  overlay.addEventListener('click', () => {
    cartSidebar.classList.remove('open');
    overlay.classList.remove('active');
  });

  // Cart item controls
  cartItems.addEventListener('click', (e) => {
    const target = e.target;
    if (target.classList.contains('qty-btn')) {
      const index = parseInt(target.dataset.index);
      const action = target.dataset.action;
      
      if (action === 'increase') {
        cart[index].quantity++;
      } else if (action === 'decrease') {
        if (cart[index].quantity > 1) {
          cart[index].quantity--;
        } else {
          cart.splice(index, 1);
        }
      }
      updateCart();
    }

    if (target.classList.contains('remove-item')) {
      const index = parseInt(target.dataset.index);
      cart.splice(index, 1);
      updateCart();
    }
  });

  // Profile
  document.getElementById('profile-btn').addEventListener('click', () => {
    productsContainer.classList.remove('active');
    profileContainer.classList.add('active');
    interactions.push({
      type: 'profile_opened',
      time: Date.now() - startTime
    });
  });

  document.querySelectorAll('.profile-menu-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.profile-menu-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.profile-section').forEach(s => s.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.section + '-section').classList.add('active');
    });
  });

  document.querySelector('.logo').addEventListener('click', (e) => {
    e.preventDefault();
    profileContainer.classList.remove('active');
    productsContainer.classList.add('active');
    currentCategory = 'alle';
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.querySelector('.nav-btn[data-category="alle"]').classList.add('active');
    renderProducts();
  });

  // Cookie banner
  document.getElementById('cookie-settings-btn').addEventListener('click', () => {
    const details = document.getElementById('cookie-details');
    details.style.display = details.style.display === 'none' ? 'block' : 'none';
  });

  document.getElementById('accept-btn').addEventListener('click', () => {
    bannerChoice = 'accepted';
    interactions.push({
      type: 'cookie_accepted',
      time: Date.now() - startTime,
      reactionTime: Date.now() - startTime - bannerShowTime
    });
    cookieBanner.style.display = 'none';
    finishBtn.style.display = 'block';
  });

  document.getElementById('reject-btn').addEventListener('click', () => {
    bannerChoice = 'rejected';
    interactions.push({
      type: 'cookie_rejected',
      time: Date.now() - startTime,
      reactionTime: Date.now() - startTime - bannerShowTime
    });
    cookieBanner.style.display = 'none';
    finishBtn.style.display = 'block';
  });

  // Finish study
  finishBtn.addEventListener('click', () => {
    const endTime = Date.now() - startTime;
    
    const studyData = {
      participantId: participantId,
      totalDuration: Math.round(endTime / 1000) + ' Sekunden',
      bannerChoice: bannerChoice,
      bannerShownAfter: Math.round(bannerShowTime / 1000) + ' Sekunden',
      bannerReactionTime: bannerChoice ? Math.round((interactions.find(i => i.type.includes('cookie_')).reactionTime) / 1000) + ' Sekunden' : 'N/A',
      cartItems: cart.length,
      cartProducts: cart.map(item => ({ name: item.name, quantity: item.quantity, price: item.price })),
      totalCartValue: '‚Ç¨' + cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
      interactions: interactions,
      categoriesVisited: [...new Set(interactions.filter(i => i.type === 'category_change').map(i => i.category))],
      profileOpened: interactions.some(i => i.type === 'profile_opened')
    };

    shopEl.style.display = 'none';
    finishBtn.style.display = 'none';
    summaryContent.textContent = JSON.stringify(studyData, null, 2);
    summaryEl.style.display = 'block';

    console.log('Study Data:', studyData);
  });

  // Search functionality
  document.getElementById('search-input').addEventListener('input', (e) => {
    const query = e.target.value.toLowerCase();
    if (query) {
      const filtered = allProducts.filter(p => 
        p.name.toLowerCase().includes(query) || 
        p.desc.toLowerCase().includes(query)
      );
      productsGrid.innerHTML = filtered.map(product => `
        <div class="product-card" data-id="${product.id}">
          <div class="product-image">
            ${product.emoji}
            ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
          </div>
          <div class="product-info">
            <div class="product-name">${product.name}</div>
            <div class="product-desc">${product.desc}</div>
            <div class="product-rating">
              <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
              <span class="review-count">(${product.reviews})</span>
            </div>
            <div class="product-footer">
              <div>
                ${product.oldPrice ? `<span class="old-price">‚Ç¨${product.oldPrice}</span>` : ''}
                <div class="product-price">‚Ç¨${product.price}</div>
              </div>
              <button class="add-to-cart-btn" data-id="${product.id}">
                In den Warenkorb
              </button>
            </div>
          </div>
        </div>
      `).join('');
    } else {
      renderProducts();
    }
  });
</script>

</body>
</html>
